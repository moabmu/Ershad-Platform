(function(n){function i(n,t){t&&n.append(t.jquery?t.clone():t)}function r(t,i,r){var f=i.clone(r.formValues);r.formValues&&u(i,f,"select, textarea");r.removeScripts&&f.find("script").remove();r.printContainer?f.appendTo(t):f.each(function(){n(this).children().appendTo(t)})}function u(t,i,r){var u=t.find(r);i.find(r).each(function(t,i){n(i).val(u.eq(t).val())})}var t;n.fn.printThis=function(u){var s,o,h,e,c,f;t=n.extend({},n.fn.printThis.defaults,u);s=this instanceof jQuery?this:n(this);o="printThis-"+(new Date).getTime();window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)?(h='javascript:document.write("<head><script>document.domain=\\"'+document.domain+'\\";<\/script><\/head><body><\/body>")',e=document.createElement("iframe"),e.name="printIframe",e.id=o,e.className="MSIE",document.body.appendChild(e),e.src=h):(c=n("<iframe id='"+o+"' name='printIframe' />"),c.appendTo("body"));f=n("#"+o);t.debug||f.css({position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"});setTimeout(function(){function v(n,t){var i,r;i=n.get(0);i=i.contentWindow||i.contentDocument||i;r=i.document||i.contentDocument||i;r.open();r.write(t);r.close()}var e,a;t.doctypeString&&v(f,t.doctypeString);var o=f.contents(),u=o.find("head"),h=o.find("body"),c=n("base"),l;l=t.base===!0&&c.length>0?c.attr("href"):typeof t.base=="string"?t.base:document.location.protocol+"//"+document.location.host;u.append('<base href="'+l+'">');t.importCSS&&n("link[rel=stylesheet]").each(function(){var t=n(this).attr("href"),i;t&&(i=n(this).attr("media")||"all",u.append("<link type='text/css' rel='stylesheet' href='"+t+"' media='"+i+"'>"))});t.importStyle&&n("style").each(function(){n(this).clone().appendTo(u)});t.pageTitle&&u.append("<title>"+t.pageTitle+"<\/title>");t.loadCSS&&(n.isArray(t.loadCSS)?jQuery.each(t.loadCSS,function(){u.append("<link type='text/css' rel='stylesheet' href='"+this+"'>")}):u.append("<link type='text/css' rel='stylesheet' href='"+t.loadCSS+"'>"));e=t.copyTagClasses;e&&(e=e===!0?"bh":e,e.indexOf("b")!==-1&&h.addClass(n("body")[0].className),e.indexOf("h")!==-1&&o.find("html").addClass(n("html")[0].className));i(h,t.header);t.canvas&&(a=0,s.find("canvas").addBack("canvas").each(function(){n(this).attr("data-printthis",a++)}));r(h,s,t);t.canvas&&h.find("canvas").each(function(){var i=n(this).data("printthis"),t=n('[data-printthis="'+i+'"]');this.getContext("2d").drawImage(t[0],0,0);t.removeData("printthis")});t.removeInline&&(n.isFunction(n.removeAttr)?o.find("body *").removeAttr("style"):o.find("body *").attr("style",""));i(h,t.footer);setTimeout(function(){f.hasClass("MSIE")?(window.frames.printIframe.focus(),u.append("<script>  window.print(); <\/script>")):document.queryCommandSupported("print")?f[0].contentWindow.document.execCommand("print",!1,null):(f[0].contentWindow.focus(),f[0].contentWindow.print());t.debug||setTimeout(function(){f.remove()},1e3)},t.printDelay)},333)};n.fn.printThis.defaults={debug:!1,importCSS:!0,importStyle:!1,printContainer:!0,loadCSS:"",pageTitle:"",removeInline:!1,printDelay:333,header:null,footer:null,formValues:!0,canvas:!1,base:!1,doctypeString:"<!DOCTYPE html>",removeScripts:!1,copyTagClasses:!1}})(jQuery);